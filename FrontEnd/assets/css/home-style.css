/* frontend/assets/css/home-style.css */
/* v8.1: Limpiado (removidos estilos de #theme-options) */

/* --- 1. VARIABLES GLOBALES Y TEMA CLARO (DEFAULT) --- */
:root, html[data-theme="claro"] {
  --bg: #f4f7f6; --bg2: #ffffff; --text: #1a2e25; --muted: #5a7066; --border: #d8e0db;
  --primary: #16a34a; --primary-strong: #15803d; --primary-light: #22c55e;
  --accent: #0ea5e9; --danger: #e53e3e; --ok: #38a169;
  --shadow-color: rgba(40, 60, 50, 0.1); --card-shadow: 0 3px 8px -1px var(--shadow-color);
  --input-bg: #e9eeeb; --radius: 10px; --radius-sm: 6px; --transition: 0.2s ease-out;
  --secondary: #f97316; --secondary-strong: #c2410c; --secondary-light: #fb923c;
  --bg-insect: #1f120a; --bg2-insect: #1a0f08; --card-insect: #2a1a0e;
  --border-insect: rgba(249, 115, 22, 0.18); --chip-insect: #4b2509;
  /* Aliases para compatibilidad con páginas antiguas */
  --text-color: var(--text); --text-color-muted: var(--muted); --card-bg: var(--bg2);
}
/* --- 2. TEMA OSCURO --- */
html[data-theme="oscuro"] {
  --bg: #0a110e; --bg2: #0f1a15; --text: #e1eee8; --muted: #8ca89a; --border: #253a31;
  --primary: #22c55e; --primary-strong: #16a34a; --primary-light: #4ade80;
  --accent: #38bdf8; --shadow-color: rgba(0, 0, 0, 0.35); --input-bg: #1a2e25;
  --text-color: var(--text); --text-color-muted: var(--muted); --card-bg: var(--bg2);
}
/* --- 3. TEMA ECOLÓGICO --- */
html[data-theme="ecologico"] {
  --bg: #f0fdf4; --bg2: #ffffff; --text: #14532d; --muted: #15803d; --border: #a7f3d0;
  --primary: #16a34a; --primary-strong: #14532d; --primary-light: #22c55e;
  --accent: #fb923c; --shadow-color: rgba(22, 163, 74, 0.1); --input-bg: #dcfce7;
  --text-color: var(--text); --text-color-muted: var(--muted); --card-bg: var(--bg2);
}
/* Aplicar tema Insectos (se superpone a claro/oscuro/ecologico) */
body[data-page-theme="insectos"] {
  --primary: var(--secondary, #f97316); --primary-strong: var(--secondary-strong, #c2410c);
  --primary-light: var(--secondary-light, #fb923c); --chip: var(--chip-insect, #4b2509);
  background: radial-gradient(900px 600px at 80% 10%, rgba(249,115,22,.18), transparent 60%), radial-gradient(900px 700px at 20% 90%, rgba(59,130,246,.12), transparent 60%), linear-gradient(140deg,var(--bg),var(--bg2) 55%);
}
html[data-theme="claro"] body[data-page-theme="insectos"] { --bg: #fff7ed; --bg2: #ffffff; --border: #fed7aa; --input-bg: #ffedd5; --card: var(--bg2); }
html[data-theme="ecologico"] body[data-page-theme="insectos"] { --bg: #fffbeb; --bg2: #ffffff; --border: #fde68a; --input-bg: #fef3c7; --card: var(--bg2); }

/* --- 4. RESET Y BASE --- */
* { box-sizing: border-box; } html { scroll-behavior: smooth; } html, body { height: 100%; }
body{ margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif; color:var(--text); background:var(--bg); display:flex; transition: background var(--transition), color var(--transition); font-size: 14.5px; line-height: 1.6; }
a { color: var(--accent); text-decoration: none; transition: color var(--transition); } a:hover { color: var(--primary); }

/* --- 5. LAYOUT (Sidebar + Main) --- */
.sidebar{ width:250px; min-width:230px; padding:16px; border-right:1px solid var(--border); background:var(--bg2); box-shadow: 2px 0 10px -2px var(--shadow-color); display:flex; flex-direction:column; gap:14px; transition:transform 0.25s ease, background var(--transition), border-color var(--transition); z-index: 100; height: 100vh; position: sticky; top: 0; }
.sidebar.hidden{ transform:translateX(-100%); }
.brand{display:flex; align-items:center; gap:10px; padding:6px 0; margin-bottom: 10px;}
.brand img.logo { width: 36px; height: 36px; border-radius: 6px; }
.brand-name{font-weight: 700; font-size: 1.05em; color: var(--text);}
.menu{display:flex; flex-direction:column; gap:4px; flex-grow: 1;}
.menu-item{ display:block; padding:9px 12px; border-radius:var(--radius-sm); color:var(--muted); text-decoration:none; border:1px solid transparent; font-size: 0.9em; transition: background var(--transition), border-color var(--transition), color var(--transition); font-weight: 500; }
.menu-item:hover{background:var(--input-bg); border-color:transparent; color:var(--text);}
.menu-item.active{background:color-mix(in srgb, var(--primary) 10%, transparent); border-color:transparent; color:var(--primary); font-weight: 600;}
.menu-sep{height:1px; background:var(--border); margin:8px 0}
.sidebar-foot{margin-top:auto; display: flex; flex-direction: column; gap: 8px; padding-top: 10px; border-top: 1px solid var(--border);}
.main{flex:1; display:flex; flex-direction:column; min-width:0; max-height: 100vh; overflow-y: auto; background: var(--bg);}
.topbar{ display:flex; justify-content:space-between; align-items:center; padding:12px 24px; border-bottom:1px solid var(--border); background:var(--bg2); box-shadow: 0 2px 8px -2px var(--shadow-color); position: sticky; top: 0; z-index: 50; }
.topbar .left{display:flex; align-items:center; gap:14px;}
.icon-btn{ font-size: 20px; line-height: 1; background: transparent; border: 1px solid var(--border); border-radius: var(--radius-sm); color: var(--muted); padding: 7px 9px; cursor: pointer; display: none; }
.icon-btn:hover { background: var(--input-bg); color: var(--text); }
.hello h1{margin:0; font-size:clamp(16px,2vw,19px); font-weight: 600; color:var(--text);}
.muted{margin:1px 0 0; color:var(--muted); font-size:12px}

/* --- 6. BOTONES Y FORMULARIOS --- */
.btn{ padding: 8px 12px; border-radius: var(--radius-sm); border: 0; cursor: pointer; font-weight: 500; color: #fff; text-decoration: none; display: inline-block; text-align: center; transition: background 0.15s ease, transform 0.1s ease, box-shadow 0.15s ease; font-size: 13px; line-height: 1.4; }
.btn:active { transform: translateY(1px); }
.btn.primary{background:linear-gradient(180deg,var(--primary),var(--primary-strong)); box-shadow: 0 2px 6px -1px color-mix(in srgb, var(--primary) 30%, transparent);}
.btn.primary:hover{ background: linear-gradient(180deg, var(--primary-light), var(--primary)); box-shadow: 0 3px 10px -2px color-mix(in srgb, var(--primary) 40%, transparent); }
.btn.ghost{background:transparent; border:1px solid var(--border); color: var(--muted);}
.btn.ghost:hover{ background: var(--input-bg); border-color: color-mix(in srgb, var(--border) 70%, var(--muted)); color: var(--text); }
.btn-sm { padding: 4px 8px; font-size: 11px; border-radius: 6px; }
.btn.switch{ font-size: 12px; padding: 7px 10px; }
.btn.switch.insectos { background: linear-gradient(180deg, var(--secondary), var(--secondary-strong)); }
body[data-page-theme="insectos"] .btn.switch { background: linear-gradient(180deg, #22c55e, #15803d); }
.btn.switch:hover { filter: brightness(1.1); }
.btn.secondary { background: var(--input-bg); color: var(--muted); border: 1px solid var(--border); } .btn.secondary:hover { background: var(--border); color: var(--text); }
.btn.btn-danger { background: transparent; border-color: var(--danger); color: var(--danger); }
.btn.btn-danger:hover { background: color-mix(in srgb, var(--danger) 15%, transparent); color: var(--danger); border-color: var(--danger); }
.content-area { padding: 20px; }
.content-area h2 { margin: 0 0 18px; font-size: 1.4em; font-weight: 600; color: var(--text); border-bottom: 1px solid var(--border); padding-bottom: 8px; }
.content-area h3 { margin: 20px 0 12px; font-size: 1.15em; font-weight: 600; color: var(--muted); }
.form-card { background: var(--bg2); border: 1px solid var(--border); border-radius: var(--radius); padding: 18px; box-shadow: var(--card-shadow); margin-bottom: 18px; }
.input-group { margin-bottom: 15px; }
.input-group label { display: block; font-size: 0.85em; color: var(--muted); margin-bottom: 5px; font-weight: 500; }
.input-group input[type="text"], .input-group input[type="email"], .input-group input[type="password"], .input-group input[type="number"], .input-group textarea, .input-group select { width: 100%; padding: 9px 10px; border-radius: var(--radius-sm); border: 1px solid var(--border); background: var(--input-bg); color: var(--text); font-size: 0.9em; outline: none; transition: border-color var(--transition), background var(--transition); }
.input-group input:focus, .input-group textarea:focus, .input-group select:focus { border-color: var(--primary); background: var(--bg2); }
.input-group textarea { min-height: 70px; resize: vertical; }
.input-group input[disabled] { background-color: color-mix(in srgb, var(--input-bg) 70%, var(--muted)); cursor: not-allowed; opacity: 0.7; }
.input-group input[type="checkbox"] { width: auto; margin-right: 6px; vertical-align: middle; accent-color: var(--primary); }
.input-group input[type="checkbox"] + label { display: inline; font-weight: normal; font-size: 0.9em; }
.message-area { min-height: 1.5em; margin-bottom: 15px; font-weight: 500; font-size: 0.85em; transition: color 0.3s; }
.message-area.error { color: var(--danger, #e53e3e); } .message-area.success { color: var(--ok, #38a169); }

/* --- 7. COMPONENTES (Buscador, Stats, Mapa) --- */
.search-wrap { padding: 15px 20px 5px; }
.searchbar { display: grid; grid-template-columns: 1fr auto auto; gap: 8px; align-items: center; background: var(--bg2); border: 1px solid var(--border); padding: 8px; border-radius: var(--radius); box-shadow: var(--card-shadow); }
.searchbar input { width: 100%; padding: 9px 12px; border-radius: var(--radius-sm); border: 1px solid var(--border); background: var(--input-bg); color: var(--text); font-size: 13px; outline: none; transition: border-color var(--transition), background var(--transition); }
.searchbar input:focus { border-color: var(--primary); background: var(--bg2); }
.search-state { margin-top: 6px; color: var(--muted); font-size: 12px; min-height: 1.2em; }
.summary { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 8px; padding: 5px 20px; }
.stat { background: var(--bg2); border: 1px solid var(--border); border-radius: var(--radius); padding: 10px 12px; box-shadow: var(--card-shadow); text-align: center; }
.stat-num { font-size: 18px; font-weight: 600; color: var(--primary); display: block; margin-bottom: 1px;}
.stat-label { color: var(--muted); font-size: 11px; display: block; }
.map-panel { padding: 8px 20px 0; transition: max-height 0.3s ease-out, opacity 0.3s ease-out, margin-bottom 0.3s ease-out, padding 0.3s ease-out; max-height: 380px; opacity: 1; margin-bottom: 15px; overflow: hidden; }
.map-panel.hidden { max-height: 0; opacity: 0; margin-bottom: 0; padding-top: 0; padding-bottom: 0; }
.map { height: 320px; width: 100%; border: 1px solid var(--border); border-radius: var(--radius); overflow: hidden; background: var(--input-bg); }

/* --- 8. TARJETAS (Plantas/Insectos/Similares) --- */
.content { padding: 0 20px 20px; display: grid; gap: 15px; }
.cards { display: grid; gap: 12px; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); }
.card { position: relative; border-radius: var(--radius-sm); overflow: hidden; border: 1px solid var(--border); background: var(--bg2); aspect-ratio: 4 / 5; cursor: pointer; transition: transform 0.15s ease, box-shadow 0.15s ease, border-color 0.15s ease; box-shadow: var(--card-shadow); }
.card:hover { transform: translateY(-3px) scale(1.03); box-shadow: 0 6px 12px -2px var(--shadow-color); border-color: color-mix(in srgb, var(--primary) 40%, transparent); }
.card img { width: 100%; height: 100%; object-fit: cover; display: block; background: var(--input-bg); transition: transform 0.2s ease-out;}
.card:hover img { transform: scale(1.05); }
.card .species-info { position: absolute; bottom: 0; left: 0; right: 0; padding: 12px 8px 6px 8px; color: #fff; background: linear-gradient(to top, rgba(0,0,0,0.9) 10%, rgba(0,0,0,0.7) 50%, transparent 95%); pointer-events: none; }
.card .species-info h4 { font-weight: 500; font-size: 13px; margin: 0 0 1px; line-height: 1.2; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; color: #fff; text-shadow: 1px 1px 1px rgba(0,0,0,0.9); }
.card .species-info p { font-size: 11px; margin: 0; font-style: italic; color: rgba(255, 255, 255, 0.8); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; text-shadow: 1px 1px 1px rgba(0,0,0,0.9); }
.card .species-info .btn-details { display: none; }
.card.list-card { aspect-ratio: auto; cursor: default; }
.card.list-card:hover { transform: none; box-shadow: var(--card-shadow); border-color: var(--border); }
.card.list-card .species-info { position: static; background: none; color: var(--text); padding: 12px; pointer-events: auto; }
.card.list-card .species-info h4 { color: var(--text); text-shadow: none; font-size: 1.05em; font-weight: 600; }
.card.list-card .species-info p { color: var(--muted); text-shadow: none; font-size: 0.9em; white-space: normal; }
.card.list-card .btn { display: inline-block; margin-top: 10px; margin-right: 6px; cursor: pointer; }
img[data-skeleton] { background: linear-gradient(90deg, var(--input-bg) 0%, var(--border) 50%, var(--input-bg) 100%); background-size: 200% 100%; animation: shimmer 1.5s infinite linear; } @keyframes shimmer { 0% { background-position: 200% 0 } 100% { background-position: -200% 0 } }
.tag { display: inline-block; background: var(--chip); border: 1px solid color-mix(in srgb, var(--primary) 30%, transparent); color: var(--muted); border-radius: 6px; padding: 2px 6px; font-size: 10px; margin: 0 4px 4px 0; }
.skeleton.card { cursor: default; position: relative; aspect-ratio: 4 / 5; background: var(--input-bg); } .skeleton.card::after { content: ""; position: absolute; inset: 0; background: linear-gradient(90deg, transparent, rgba(255, 255, 255, .05), transparent); animation: sk 1.5s infinite; } .skeleton.card:hover { transform: none; box-shadow: var(--card-shadow); border-color: var(--border); } @keyframes sk { from { transform: translateX(-100%) } to { transform: translateX(100%) } }

/* --- 9. PERFIL TOPBAR --- */
.topbar .right { display: flex; align-items: center; gap: 10px; }
.profile-section { display: flex; align-items: center; gap: 8px; cursor: pointer; border: 1px solid transparent; padding: 3px 5px; border-radius: var(--radius-sm); transition: background var(--transition), border-color var(--transition); }
.profile-section:hover { background: var(--input-bg); border-color: var(--border); }
.profile-name { font-size: 0.8em; font-weight: 500; color: var(--muted); white-space: nowrap; }
.profile-avatar { width: 28px; height: 28px; border-radius: 50%; object-fit: cover; border: 2px solid var(--border); }

/* --- 10. PÁGINA DE PERFIL (`perfil.html`) --- */
.profile-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 20px; }
.profile-photo-section { text-align: center; }
#current-photo { display: block; width: 110px; height: 110px; margin: 0 auto 12px; border: 4px solid var(--border); padding: 3px; background: var(--bg2); border-radius: 50%; object-fit: cover; box-shadow: var(--card-shadow); }
input[type="file"] { font-size: 0.8em; color: var(--muted); margin-top: 5px; display: block; max-width: 200px; margin: 5px auto 0; }
#photo-upload-label { font-size: 0.85em; display: inline-block; padding: 8px 12px; background: var(--input-bg); color: var(--muted); border: 1px solid var(--border); border-radius: var(--radius-sm); cursor: pointer; transition: background var(--transition); }
#photo-upload-label:hover { background: var(--border); color: var(--text); }
#photo-upload { display: none; }

/* ===== INICIO CAMBIO: Estilos de Tema Eliminados ===== */
/* Los estilos para #theme-options y .theme-btn fueron eliminados */
/* ===== FIN CAMBIO ===== */

/* Interruptor de Tema Sol/Luna */
.theme-toggle-btn {
    background: var(--input-bg);
    border: 1px solid var(--border);
    color: var(--muted);
    width: 38px; height: 38px;
    padding: 0;
    border-radius: 50%;
    display: grid;
    place-items: center;
    font-size: 1.1em;
    cursor: pointer;
    transition: var(--transition);
}
.theme-toggle-btn:hover { background: var(--border); color: var(--text); }
/* Ocultar un ícono basado en el tema */
html[data-theme="claro"] .theme-toggle-btn .icon-moon { display: none; }
html[data-theme="oscuro"] .theme-toggle-btn .icon-sun { display: none; }
html[data-theme="ecologico"] .theme-toggle-btn .icon-sun { display: none; } /* Ecológico usa ícono de luna */

/* --- 11. OTROS (Detail, Lightbox, Responsive, Footer, Leaflet) --- */
.detail-tabs { margin-bottom: 18px; padding: 0 20px; border-bottom: 1px solid var(--border); } .detail-tabs .tab-btn { border-radius: 8px 8px 0 0; border-bottom: 0; margin-bottom: -1px; background: transparent; border-color: transparent; padding: 7px 10px; font-size: 12px; color: var(--muted); cursor: pointer; } .detail-tabs .tab-btn:hover { background: var(--input-bg); } .detail-tabs .tab-btn.active { background: var(--bg); border-color: var(--border); border-bottom-color: var(--bg); color: var(--primary); } .tab-panel { animation: fadeIn 0.3s ease-out; display: none; } .tab-panel.show { display: block; } @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } } .tab-panel h3 { margin: 1.5em 0 0.8em; font-size: 1.05em; padding-bottom: 4px; font-weight: 600; color: var(--muted); border-bottom: 1px solid var(--border); } .tab-panel h3:first-child { margin-top: 0; } #tab-overview .cards { margin-top: 10px; grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); gap: 8px;} #tab-overview .cards img { height: 90px; } .wiki-article { margin-top: 12px; line-height: 1.65; font-size: 0.85em; } .wiki-article h2, .wiki-article h3, .wiki-article h4 { margin: 1em 0 0.4em; color: var(--muted); font-weight: 600; } .wiki-article img { border-radius: 4px; margin: 8px 0; border: 1px solid var(--border); } .wiki-article table { margin: 10px 0; font-size: 0.8em; } .wiki-article th, .wiki-article td { padding: 5px 7px; border: 1px solid var(--border); } .wiki-article th { background: var(--card); } .taxonomy { list-style: none; padding: 0; } .taxonomy li { margin-bottom: 4px; font-size: 0.85em; } .taxonomy strong { margin-right: 5px; color: var(--muted); }
.modal { position: fixed; inset: 0; display: none; place-items: center; z-index: 100; } .modal[aria-hidden="false"] { display: grid; } .modal-backdrop { position: absolute; inset: 0; background: rgba(0, 0, 0, .8); backdrop-filter: blur(4px); cursor: pointer; } .modal-card { position: relative; width: min(700px, 90vw); max-height: 90vh; background: var(--bg2); border: 1px solid var(--border); border-radius: var(--radius); padding: 18px; color: var(--text); box-shadow: var(--shadow); overflow-y: auto; } .modal-x { position: absolute; top: 10px; right: 10px; border: 0; background: transparent; color: #fff; font-size: 26px; cursor: pointer; line-height: 1; padding: 5px; } .lb__btn { position:absolute; top: 50%; transform: translateY(-50%); width:40px; height:40px; font-size:26px; } .lb__prev { left: 10px; } .lb__next { right: 10px; } #lb-img { max-height: 75vh; } #lb-cap { margin-top: 12px; font-size: 13px; }
@media (max-width: 980px){ .sidebar{position:fixed; top:0; left:0; height:100%; transform:translateX(-100%);} .sidebar.shown { transform: translateX(0); box-shadow: 10px 0 30px rgba(0,0,0,0.4); } .main{margin-left:0} .topbar .icon-btn { display: block; } }
@media (max-width: 720px){ .searchbar{grid-template-columns:1fr auto;} .searchbar #toggleMap { grid-column: 1 / 2; grid-row: 2; justify-self: start; margin-top: 8px;} .modal-card { width: 95vw; padding: 15px;} .cards{grid-template-columns:repeat(auto-fill,minmax(140px,1fr))} .card img { height: auto; aspect-ratio: 4 / 5; } .card .species-info { padding: 12px 7px 5px 7px; } .card .species-info h4 { font-size: 0.75em; } .card .species-info p { font-size: 0.65em; } .topbar { padding: 10px 15px; } .search-wrap, .summary, .map-panel, .content, .detail-tabs { padding-left: 15px; padding-right: 15px; } .profile-name { display: none; } .profile-avatar { width: 30px; height: 30px; } }
@media (max-width: 480px) { .summary { grid-template-columns: 1fr 1fr; gap: 8px; } .stat { padding: 8px 10px; } .stat-num { font-size: 15px; } .stat-label { font-size: 9px; } .cards{grid-template-columns: 1fr 1fr;} .card img { height: auto; aspect-ratio: 4 / 5; } .hello h1 { font-size: 14px; } .muted { font-size: 10px; } .btn.switch { font-size: 10px; padding: 6px 8px; } .searchbar { padding: 6px; } .searchbar input { padding: 8px 10px; font-size: 12px; } .lb__btn { width: 30px; height: 30px; font-size: 20px; } .lb__prev { left: 5px; } .lb__next { right: 5px; } .topbar .right { gap: 5px; } .profile-avatar { width: 26px; height: 26px; } }
.foot { padding: 12px 20px; text-align: center; color: var(--muted); font-size: 11px; border-top: 1px solid var(--border); margin-top: 20px;}
.leaflet-container{ background: var(--bg2); font: inherit; color: inherit; border-radius: var(--radius); } .leaflet-control-zoom a{ background: var(--card); border: 1px solid var(--border); color: var(--text); } .leaflet-control-zoom a:hover{ background: var(--input-bg); } .leaflet-popup-content-wrapper { background: var(--card); color: var(--text); border: 1px solid var(--border); border-radius: var(--radius-sm); box-shadow: var(--shadow); } .leaflet-popup-tip { background: var(--card); } .popupbox{ display:flex; gap:8px; align-items:flex-start; } .popupbox__img{ width:70px; height:55px; object-fit:cover; border-radius: var(--radius-sm); border:1px solid var(--border); background:var(--bg2); } .popupbox__body{ display:grid; gap:2px } .popupbox__title{ font-weight:600; font-size: 0.95em; } .popupbox__sci{ font-style:italic; color: var(--muted); font-size: 0.8em } .popupbox__meta{ font-size: 0.75em; opacity:.85 } .popupbox .btn-sm { margin-top: 5px; }
.feno-form-container { border-top: 1px solid var(--border); padding-top: 15px; margin-top: 15px; }
.feno-form-container h5 { font-size: 1em; font-weight: 600; color: var(--muted); margin: 0 0 15px; }
.feno-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px 15px; margin-bottom: 15px; }