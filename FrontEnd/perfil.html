<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mi Perfil - InForest</title>

  <link rel="stylesheet" href="./assets/css/home-style.css" />
  <link rel="stylesheet" href="./assets/css/perfil.css" />

  <script>
    (function () {
      const savedTheme = localStorage.getItem('userTheme') || 'claro';
      document.documentElement.setAttribute('data-theme', savedTheme);
    })();
  </script>
</head>
<body data-page-theme="perfil">
  <!-- SIDEBAR -->
  <aside class="sidebar" id="sidebar" aria-label="MenÃº lateral">
    <div class="brand">
      <img src="./assets/img/logo.png" alt="Logo InForest" class="logo">
      <div class="brand-name">InForest</div>
    </div>
    <nav class="menu" role="navigation" aria-label="Secciones">
      <a class="menu-item" href="plantas.html">Plantas</a>
      <a class="menu-item" href="insectos.html">Insectos</a>
      <div class="menu-sep"></div>
      <a class="menu-item" href="listas.html">Mis Listas</a>
      <a class="menu-item" href="clases.html">Clases (Classroom)</a>
      <a class="menu-item" href="registro-fenologico.html">Observatorio Personal</a>
      <a class="menu-item" href="comunidad.html">Foros y Ranking</a>
      <div class="menu-sep"></div>
      <a class="menu-item active" href="perfil.html">Mi Perfil</a>
    </nav>
    <div class="sidebar-foot">
      <button id="logout" class="btn ghost btn-sm" aria-label="Salir">Salir</button>
    </div>
  </aside>

  <!-- MAIN -->
  <div class="main">
    <!-- TOPBAR -->
    <header class="topbar">
      <div class="left">
        <button id="toggleSidebar"
                class="icon-btn"
                aria-pressed="false"
                aria-label="Mostrar/ocultar menÃº">â˜°</button>
        <div class="hello">
          <p class="muted">Hola ğŸ‘‹</p>
          <h1 id="perfil-title-name">Invitado</h1>
          <p class="muted small">
            Gestiona tu informaciÃ³n personal, seguridad y preferencias de InForest.
          </p>
        </div>
      </div>
      <div class="right">
        <div class="profile-section" id="user-profile">
          <span class="profile-name" id="username-display-topbar">Usuario</span>
          <img src="./assets/img/default-avatar.png"
               alt="Avatar"
               class="profile-avatar"
               id="user-avatar">
        </div>
      </div>
    </header>

    <!-- CONTENIDO PERFIL -->
    <main class="content perfil-page" aria-label="ConfiguraciÃ³n de perfil">
      <section class="perfil-grid">

        <!-- Foto de Perfil -->
        <section class="perfil-card perfil-card-large">
          <h2 class="perfil-card-title">Foto de Perfil</h2>
          <div class="perfil-avatar-row">
            <div class="perfil-avatar-wrapper">
              <img
                id="perfil-avatar-img"
                class="perfil-avatar-img"
                src="./assets/img/default-avatar.png"
                alt="Foto de perfil">
              <button id="perfil-avatar-trigger"
                      class="perfil-avatar-camera"
                      aria-label="Cambiar foto de perfil">
                ğŸ“·
              </button>
              <!-- oculto, solo se usa desde JS -->
              <input id="perfil-avatar-input"
                     type="file"
                     accept="image/*"
                     class="perfil-hidden-input">
            </div>
            <div class="perfil-avatar-text">
              <p class="perfil-avatar-name" id="perfil-display-fullname">
                Nombre Apellido
              </p>
              <p class="perfil-avatar-username" id="perfil-display-username">
                @usuario
              </p>
              <p class="perfil-avatar-hint">
                Sube una imagen cuadrada para mejores resultados (mÃ­n. 400x400px).
              </p>
            </div>
          </div>
        </section>

        <!-- InformaciÃ³n Personal -->
        <section class="perfil-card">
          <h2 class="perfil-card-title">InformaciÃ³n Personal</h2>

          <div class="perfil-field-row">
            <label class="perfil-label" for="perfil-fullName">Nombre Completo *</label>
            <div class="perfil-input-wrapper">
              <span class="perfil-input-icon">ğŸ‘¤</span>
              <input id="perfil-fullName"
                     class="perfil-input"
                     type="text"
                     placeholder="Tu nombre completo">
            </div>
          </div>

          <div class="perfil-field-row">
            <label class="perfil-label" for="perfil-email">Correo ElectrÃ³nico *</label>
            <div class="perfil-input-wrapper">
              <span class="perfil-input-icon">âœ‰ï¸</span>
              <input id="perfil-email"
                     class="perfil-input"
                     type="email"
                     placeholder="tu.email@ejemplo.com">
            </div>
          </div>

          <div class="perfil-field-row">
            <label class="perfil-label" for="perfil-username">Nombre de Usuario *</label>
            <div class="perfil-input-wrapper">
              <span class="perfil-input-icon">@</span>
              <input id="perfil-username"
                     class="perfil-input"
                     type="text"
                     placeholder="nombreusuario">
            </div>
          </div>

          <div class="perfil-field-row">
            <label class="perfil-label" for="perfil-location">UbicaciÃ³n</label>
            <div class="perfil-input-wrapper">
              <span class="perfil-input-icon">ğŸ“</span>
              <input id="perfil-location"
                     class="perfil-input"
                     type="text"
                     placeholder="Ciudad, PaÃ­s">
            </div>
          </div>
        </section>

        <!-- Cambiar ContraseÃ±a -->
        <section class="perfil-card">
          <h2 class="perfil-card-title">Cambiar ContraseÃ±a</h2>

          <div class="perfil-field-row">
            <label class="perfil-label" for="perfil-currentPassword">ContraseÃ±a Actual</label>
            <div class="perfil-input-wrapper">
              <span class="perfil-input-icon">ğŸ”’</span>
              <input id="perfil-currentPassword"
                     class="perfil-input perfil-input-password"
                     type="password"
                     placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
              <button class="perfil-eye-btn"
                      data-target="perfil-currentPassword">ğŸ‘ï¸</button>
            </div>
          </div>

          <div class="perfil-field-row">
            <label class="perfil-label" for="perfil-newPassword">Nueva ContraseÃ±a</label>
            <div class="perfil-input-wrapper">
              <span class="perfil-input-icon">ğŸ”’</span>
              <input id="perfil-newPassword"
                     class="perfil-input perfil-input-password"
                     type="password"
                     placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
              <button class="perfil-eye-btn"
                      data-target="perfil-newPassword">ğŸ‘ï¸</button>
            </div>
          </div>

          <div class="perfil-field-row">
            <label class="perfil-label" for="perfil-confirmPassword">
              Confirmar Nueva ContraseÃ±a
            </label>
            <div class="perfil-input-wrapper">
              <span class="perfil-input-icon">ğŸ”’</span>
              <input id="perfil-confirmPassword"
                     class="perfil-input perfil-input-password"
                     type="password"
                     placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
              <button class="perfil-eye-btn"
                      data-target="perfil-confirmPassword">ğŸ‘ï¸</button>
            </div>
          </div>

          <p class="perfil-helper-text">
            La contraseÃ±a debe tener al menos 8 caracteres,
            incluyendo mayÃºsculas, minÃºsculas y un nÃºmero.
          </p>
        </section>

      </section>
    </main>

    <footer class="foot">
      <small>Â© 2025 InForest</small>
    </footer>
  </div>

  <!-- Scripts globales -->
  <script src="./assets/scripts/auth-guard.js"></script>
  <script src="./assets/scripts/ui-helpers.js"></script>
  <script src="./assets/scripts/api.js" type="module"></script>

  <!-- Script especÃ­fico del perfil -->
  <script src="./assets/scripts/perfil.js"></script>
</body>
</html>
